pipeline {
    agent any
    
    stages {
        stage('Build') {
            steps {
                echo 'Task: Bild the code using Maven'
                
                // Create a log file for the build
                writeFile file: 'build.log', text: 'Building the code using Maven.'
            }
        }
        stage('Unit and Integration Tests') {
            steps {
                echo 'Task: Run unit tests and integration tests'
                echo 'Tools: JUnit, Selenium'
                
                // Create a log file for unit and integration tests
                writeFile file: 'tests.log', text: 'Running unit and integration tests.'
            }
        }
        stage('Code Analysis') {
            steps {
                echo 'Task: Integrate SonarQube for code analysis'
                echo 'Tool: SonarQube'
                
                // Create a log file for code analysis
                writeFile file: 'analysis.log', text: 'Integrating SonarQube for code analysis.'
            }
        }
        stage('Security Scan') {
            steps {
                echo 'Task: Perform security scan using OWASP ZAP'
                echo 'Tool: OWASP ZAP'
                
                // Create a log file for security scan
                writeFile file: 'security_scan.log', text: 'Performing security scan using OWASP ZAP.'
            }
        }
        // Add other stages as needed
    }
    
    post {
        always {
            // Send email notification with the attached log files
            mail (
                to: "rahanthalagesan@gmail.com",
                subject: "Pipeline Execution Status",
                body: "Please find the log files attached for the pipeline execution.",
                attachments: ['build.log', 'tests.log', 'analysis.log', 'security_scan.log']
            )
        }
    }
}
